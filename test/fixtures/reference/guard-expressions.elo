# Guard expressions - simple guard
assert((guard true in 42) == 42)

# Guard with condition that passes
assert((guard 5 > 3 in 100) == 100)

# Guard with labeled constraint
assert((guard positive: 10 > 0 in 10) == 10)

# Guard with string message label
assert((guard 'value must be positive': 7 > 0 in 7) == 7)

# Guard with multiple constraints (all pass)
assert((guard 10 > 0, 10 < 100 in 10) == 10)

# Guard with multiple labeled constraints
assert((guard positive: 5 > 0, small: 5 < 10 in 5) == 5)

# Let with guard sugar: let x = 5 guard x > 0 in body
assert((let x = 5 guard x > 0 in x * 2) == 10)

# Check expression (postcondition synonym for guard)
assert((check true in 99) == 99)

# Check with labeled constraint
assert((check valid: 3 > 0 in 3) == 3)

# Let with check sugar: let x = 5 check x > 0 in body
assert((let x = 10 check x > 0 in x + 5) == 15)

# Guard with complex body
assert((guard 1 > 0 in let x = 10, y = 20 in x + y) == 30)

# Nested guards
assert((guard true in guard true in 7) == 7)

# Guard combined with if expression
assert((guard true in if true then 1 else 2) == 1)

